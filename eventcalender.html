<!DOCTYPE html>
<html class="light" lang="en">
<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Smart School - Events Calendar</title>

    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@100..900&amp;display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />

    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#7f13ec",
                        "background-light": "#f7f6f8",
                        "background-dark": "#191022",
                    },
                    fontFamily: {
                        "display": ["Lexend", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.25rem",
                        "lg": "0.5rem",
                        "xl": "0.75rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>

    <style>
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }
    </style>
</head>

<body class="font-display bg-background-light dark:bg-background-dark">
    <div class="relative flex h-auto min-h-screen w-full flex-col group/design-root overflow-x-hidden">
        <div class="flex h-full min-h-screen">
            
            <!-- SideNavBar -->
            <div class="flex h-full min-h-screen flex-col justify-between bg-[#311B92] p-4 w-64 text-white">
                
                <!-- Top Nav Items -->
                <div class="flex flex-col gap-8">
                    <div class="flex items-center gap-3">
                        <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10"
                            style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuAgpvxnfaleH6qxU2ZQAoUpIDNKDUprZJIZmkl5NLeDRLC5I0n3ly_7mBYWvufKtVpbjYzNfEvMEfWTwFwLrEBG6K-yMhIzWt-kV5uWC5wCi1UjNsXR67hqXB2QwaXhfzmC13W4yhSgdO2DIUPpK86-efZxTP2CUkvlZ3FJpKatPaJ4S3naazDKY2he2QHByMeaho72fdiUidBUtaUtpZmK3TwrkCvtXXIyhaCU_bzP_gbVPS3A11dKyr0jLilC2wVrnZxGlvfNUD8");'>
                        </div>
                        <div class="flex flex-col">
                            <h1 class="text-white text-base font-medium leading-normal">Admin</h1>
                            <p class="text-gray-300 text-sm font-normal leading-normal">admin@smartschool.edu</p>
                        </div>
                    </div>

                    <div class="flex flex-col gap-2">
                        <a  href="businesslandingpage.html"
                        class="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-white/10" href="#">
                            <span class="material-symbols-outlined">dashboard</span>
                            <p class="text-sm font-medium leading-normal">Dashboard</p>
                        </a>

                        <a class="flex items-center gap-3 px-3 py-2 rounded-lg bg-white/20 text-white" href="#">
                            <span class="material-symbols-outlined">calendar_month</span>
                            <p class="text-sm font-medium leading-normal">Calendar</p>
                        </a>

                        <a class="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-white/10" href="#">
                            <span class="material-symbols-outlined">school</span>
                            <p class="text-sm font-medium leading-normal">Students</p>
                        </a>

                        <a class="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-white/10" href="#">
                            <span class="material-symbols-outlined">group</span>
                            <p class="text-sm font-medium leading-normal">Teachers</p>
                        </a>

                        <a class="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-white/10" href="#">
                            <span class="material-symbols-outlined">settings</span>
                            <p class="text-sm font-medium leading-normal">Settings</p>
                        </a>
                    </div>
                </div>

                <!-- Bottom Nav Items -->
                <div class="flex flex-col gap-4">
                    <button onclick="openEventModal()"
                        class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-primary text-white text-sm font-bold leading-normal tracking-[0.015em] hover:bg-primary/90">
                        <span class="truncate">New Event</span>
                    </button>

                    <div class="flex flex-col gap-1">
                        <a class="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-white/10" href="#">
                            <span class="material-symbols-outlined">help_outline</span>
                            <p class="text-sm font-medium leading-normal">Help</p>
                        </a>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <main class="flex-1 p-8 bg-white dark:bg-background-dark overflow-auto">
                <div class="flex flex-col h-full">
                    
                    <!-- Page Heading -->
                    <div class="flex flex-wrap justify-between gap-3 items-center">
                        <div class="flex min-w-72 flex-col gap-2">
                            <p class="text-[#141118] dark:text-white text-4xl font-black leading-tight tracking-[-0.033em]">
                                Events Calendar
                            </p>
                            <p class="text-[#756189] dark:text-gray-400 text-base font-normal leading-normal">
                                View and manage all school events in one place.
                            </p>
                        </div>
                    </div>

                    <!-- Calendar Controls -->
                    <div class="flex flex-wrap items-center justify-between gap-4 py-6 border-b border-gray-200 dark:border-gray-700">
                        
                        <!-- Toolbar -->
                        <div class="flex items-center gap-2">
                            <button onclick="previousMonth()" class="p-2 text-[#141118] dark:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-white/10">
                                <span class="material-symbols-outlined">chevron_left</span>
                            </button>
                            <button onclick="nextMonth()" class="p-2 text-[#141118] dark:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-white/10">
                                <span class="material-symbols-outlined">chevron_right</span>
                            </button>
                            <button onclick="goToToday()"
                                class="flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-white dark:bg-background-light border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 text-sm font-bold leading-normal tracking-[0.015em] hover:bg-gray-50 dark:hover:bg-white/5">
                                <span class="truncate">Today</span>
                            </button>
                        </div>

                        <p id="currentMonthYear" class="text-[#141118] dark:text-white text-xl font-bold leading-tight"></p>

                        <div class="flex items-center gap-4">
                            <!-- Segmented Buttons -->
                            <div class="flex h-10 items-center justify-center rounded-lg bg-[#f2f0f4] dark:bg-white/10 p-1">
                                <label
                                    class="flex cursor-pointer h-full grow items-center justify-center overflow-hidden rounded-lg px-3 has-[:checked]:bg-white has-[:checked]:dark:bg-primary has-[:checked]:shadow-[0_0_4px_rgba(0,0,0,0.1)] has-[:checked]:text-[#141118] has-[:checked]:dark:text-white text-[#756189] dark:text-gray-400 text-sm font-medium leading-normal">
                                    <span class="truncate">Month</span>
                                    <input checked class="invisible w-0" name="calendarView" type="radio" value="Month" />
                                </label>
                                <label
                                    class="flex cursor-pointer h-full grow items-center justify-center overflow-hidden rounded-lg px-3 has-[:checked]:bg-white has-[:checked]:dark:bg-primary has-[:checked]:shadow-[0_0_4px_rgba(0,0,0,0.1)] has-[:checked]:text-[#141118] has-[:checked]:dark:text-white text-[#756189] dark:text-gray-400 text-sm font-medium leading-normal">
                                    <span class="truncate">Week</span>
                                    <input class="invisible w-0" name="calendarView" type="radio" value="Week" />
                                </label>
                                <label
                                    class="flex cursor-pointer h-full grow items-center justify-center overflow-hidden rounded-lg px-3 has-[:checked]:bg-white has-[:checked]:dark:bg-primary has-[:checked]:shadow-[0_0_4px_rgba(0,0,0,0.1)] has-[:checked]:text-[#141118] has-[:checked]:dark:text-white text-[#756189] dark:text-gray-400 text-sm font-medium leading-normal">
                                    <span class="truncate">Day</span>
                                    <input class="invisible w-0" name="calendarView" type="radio" value="Day" />
                                </label>
                            </div>

                            <button onclick="openEventModal()"
                                class="flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 bg-primary text-white gap-2 text-sm font-bold leading-normal tracking-[0.015em] min-w-0 px-4 hover:bg-primary/90">
                                <span class="material-symbols-outlined text-lg">add</span>
                                <span class="truncate">Add Event</span>
                            </button>
                        </div>
                    </div>

                    <!-- Calendar Grid -->
                    <div class="flex-1 mt-4 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700">
                        <div class="grid grid-cols-7 gap-px bg-gray-200 dark:bg-gray-700">
                            <!-- Weekday Headers -->
                            <div class="text-[#141118] dark:text-white text-sm font-bold leading-normal tracking-[0.015em] flex h-12 items-center justify-center bg-white dark:bg-background-dark">Sun</div>
                            <div class="text-[#141118] dark:text-white text-sm font-bold leading-normal tracking-[0.015em] flex h-12 items-center justify-center bg-white dark:bg-background-dark">Mon</div>
                            <div class="text-[#141118] dark:text-white text-sm font-bold leading-normal tracking-[0.015em] flex h-12 items-center justify-center bg-white dark:bg-background-dark">Tue</div>
                            <div class="text-[#141118] dark:text-white text-sm font-bold leading-normal tracking-[0.015em] flex h-12 items-center justify-center bg-white dark:bg-background-dark">Wed</div>
                            <div class="text-[#141118] dark:text-white text-sm font-bold leading-normal tracking-[0.015em] flex h-12 items-center justify-center bg-white dark:bg-background-dark">Thu</div>
                            <div class="text-[#141118] dark:text-white text-sm font-bold leading-normal tracking-[0.015em] flex h-12 items-center justify-center bg-white dark:bg-background-dark">Fri</div>
                            <div class="text-[#141118] dark:text-white text-sm font-bold leading-normal tracking-[0.015em] flex h-12 items-center justify-center bg-white dark:bg-background-dark">Sat</div>
                        </div>

                        <!-- Calendar Days (Generated by JS) -->
                        <div id="calendarGrid" class="grid grid-cols-7 gap-px bg-gray-200 dark:bg-gray-700"></div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Event Modal -->
    <div id="eventModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
        <div class="bg-white dark:bg-background-dark rounded-xl shadow-2xl max-w-md w-full p-6">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-2xl font-bold text-[#141118] dark:text-white">Add Event</h2>
                <button onclick="closeEventModal()" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            
            <form id="eventForm" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-[#141118] dark:text-white mb-1">Event Title</label>
                    <input type="text" id="eventTitle" required
                        class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-background-light text-[#141118] dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-[#141118] dark:text-white mb-1">Date</label>
                    <input type="date" id="eventDate" required
                        class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-background-light text-[#141118] dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-[#141118] dark:text-white mb-1">Time (optional)</label>
                    <input type="time" id="eventTime"
                        class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-background-light text-[#141118] dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-[#141118] dark:text-white mb-1">Description (optional)</label>
                    <textarea id="eventDescription" rows="3"
                        class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-background-light text-[#141118] dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent"></textarea>
                </div>
                
                <div class="flex gap-3 mt-6">
                    <button type="submit"
                        class="flex-1 bg-primary text-white px-4 py-2 rounded-lg font-bold hover:bg-primary/90 transition-colors">
                        Save Event
                    </button>
                    <button type="button" onclick="closeEventModal()"
                        class="flex-1 bg-gray-200 dark:bg-white/10 text-[#141118] dark:text-white px-4 py-2 rounded-lg font-bold hover:bg-gray-300 dark:hover:bg-white/20 transition-colors">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Event Details Modal -->
    <div id="eventDetailsModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
        <div class="bg-white dark:bg-background-dark rounded-xl shadow-2xl max-w-md w-full p-6">
            <div class="flex justify-between items-center mb-4">
                <h2 id="detailTitle" class="text-2xl font-bold text-[#141118] dark:text-white"></h2>
                <button onclick="closeEventDetailsModal()" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            
            <div class="space-y-3">
                <div class="flex items-center gap-2 text-[#756189] dark:text-gray-400">
                    <span class="material-symbols-outlined">calendar_today</span>
                    <span id="detailDate"></span>
                </div>
                <div class="flex items-center gap-2 text-[#756189] dark:text-gray-400">
                    <span class="material-symbols-outlined">schedule</span>
                    <span id="detailTime"></span>
                </div>
                <div class="mt-4">
                    <p id="detailDescription" class="text-[#141118] dark:text-white whitespace-pre-wrap"></p>
                </div>
            </div>
            
            <div class="flex gap-3 mt-6">
                <button onclick="deleteCurrentEvent()"
                    class="flex-1 bg-red-500 text-white px-4 py-2 rounded-lg font-bold hover:bg-red-600 transition-colors">
                    Delete Event
                </button>
                <button onclick="closeEventDetailsModal()"
                    class="flex-1 bg-gray-200 dark:bg-white/10 text-[#141118] dark:text-white px-4 py-2 rounded-lg font-bold hover:bg-gray-300 dark:hover:bg-white/20 transition-colors">
                    Close
                </button>
            </div>
        </div>
    </div>

    <script>
        // ========================================
        // STATE MANAGEMENT
        // ========================================
        
        let currentDate = new Date();
        let events = {};
        let selectedEventId = null;

        // ========================================
        // INITIALIZATION
        // ========================================
        
        function initCalendar() {
            loadEvents();
            renderCalendar();
            updateMonthYearDisplay();
        }

        // ========================================
        // EVENT STORAGE (In-Memory)
        // ========================================
        
        function saveEvents() {
            // Events are stored in memory during the session
            // You can extend this to use localStorage if needed
        }

        function loadEvents() {
            // Load events from memory
            // Can be extended to load from localStorage
        }

        // ========================================
        // CALENDAR RENDERING
        // ========================================
        
        function renderCalendar() {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const daysInPrevMonth = new Date(year, month, 0).getDate();
            
            const calendarGrid = document.getElementById('calendarGrid');
            calendarGrid.innerHTML = '';
            
            const today = new Date();
            const isCurrentMonth = today.getMonth() === month && today.getFullYear() === year;
            const todayDate = today.getDate();
            
            // Render previous month's trailing days
            for (let i = firstDay - 1; i >= 0; i--) {
                const day = daysInPrevMonth - i;
                const cell = createDayCell(day, true, year, month - 1);
                calendarGrid.appendChild(cell);
            }
            
            // Render current month's days
            for (let day = 1; day <= daysInMonth; day++) {
                const isToday = isCurrentMonth && day === todayDate;
                const cell = createDayCell(day, false, year, month, isToday);
                calendarGrid.appendChild(cell);
            }
            
            // Render next month's leading days
            const totalCells = firstDay + daysInMonth;
            const remainingCells = totalCells % 7 === 0 ? 0 : 7 - (totalCells % 7);
            
            for (let day = 1; day <= remainingCells; day++) {
                const cell = createDayCell(day, true, year, month + 1);
                calendarGrid.appendChild(cell);
            }
        }

        function createDayCell(day, isOtherMonth, year, month, isToday = false) {
            const cell = document.createElement('div');
            const dateKey = formatDateKey(year, month, day);
            const dayEvents = events[dateKey] || [];
            
            cell.className = `relative p-3 bg-white dark:bg-background-dark min-h-[100px] cursor-pointer hover:bg-gray-50 dark:hover:bg-white/5 transition-colors ${
                isOtherMonth ? 'text-gray-400 dark:text-gray-600' : 'text-[#141118] dark:text-white'
            }`;
            
            // Click on day to add event
            cell.onclick = () => openEventModal(dateKey);
            
            // Day number
            const dayNumber = document.createElement('div');
            dayNumber.className = `text-sm font-medium mb-2 inline-flex ${
                isToday ? 'bg-primary text-white rounded-full w-7 h-7 items-center justify-center' : ''
            }`;
            dayNumber.textContent = day;
            
            cell.appendChild(dayNumber);
            
            // Events container
            const eventsContainer = document.createElement('div');
            eventsContainer.className = 'space-y-1';
            
            // Display up to 3 events
            dayEvents.slice(0, 3).forEach(event => {
                const eventDiv = document.createElement('div');
                eventDiv.className = 'text-xs bg-primary/10 text-primary dark:bg-primary/20 px-2 py-1 rounded truncate cursor-pointer hover:bg-primary/20 dark:hover:bg-primary/30 transition-colors';
                eventDiv.textContent = event.time ? `${event.time} ${event.title}` : event.title;
                eventDiv.onclick = (e) => {
                    e.stopPropagation();
                    showEventDetails(event.id);
                };
                eventsContainer.appendChild(eventDiv);
            });
            
            // Show "+X more" if there are more than 3 events
            if (dayEvents.length > 3) {
                const moreDiv = document.createElement('div');
                moreDiv.className = 'text-xs text-primary dark:text-primary font-medium cursor-pointer hover:underline';
                moreDiv.textContent = `+${dayEvents.length - 3} more`;
                moreDiv.onclick = (e) => {
                    e.stopPropagation();
                    openEventModal(dateKey);
                };
                eventsContainer.appendChild(moreDiv);
            }
            
            cell.appendChild(eventsContainer);
            
            return cell;
        }

        // ========================================
        // DATE UTILITIES
        // ========================================
        
        function formatDateKey(year, month, day) {
            const date = new Date(year, month, day);
            return date.toISOString().split('T')[0];
        }

        function updateMonthYearDisplay() {
            const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',
                'July', 'August', 'September', 'October', 'November', 'December'];
            document.getElementById('currentMonthYear').textContent = 
                `${monthNames[currentDate.getMonth()]} ${currentDate.getFullYear()}`;
        }

        // ========================================
        // NAVIGATION
        // ========================================
        
        function previousMonth() {
            currentDate.setMonth(currentDate.getMonth() - 1);
            renderCalendar();
            updateMonthYearDisplay();
        }

        function nextMonth() {
            currentDate.setMonth(currentDate.getMonth() + 1);
            renderCalendar();
            updateMonthYearDisplay();
        }

        function goToToday() {
            currentDate = new Date();
            renderCalendar();
            updateMonthYearDisplay();
        }

        // ========================================
        // EVENT MODAL
        // ========================================
        
        function openEventModal(dateKey = null) {
            const modal = document.getElementById('eventModal');
            modal.classList.remove('hidden');
            
            if (dateKey) {
                document.getElementById('eventDate').value = dateKey;
            } else {
                const today = new Date().toISOString().split('T')[0];
                document.getElementById('eventDate').value = today;
            }
            
            // Focus on title field
            setTimeout(() => {
                document.getElementById('eventTitle').focus();
            }, 100);
        }

        function closeEventModal() {
            document.getElementById('eventModal').classList.add('hidden');
            document.getElementById('eventForm').reset();
        }

        // ========================================
        // EVENT DETAILS MODAL
        // ========================================
        
        function showEventDetails(eventId) {
            selectedEventId = eventId;
            
            // Find the event
            let foundEvent = null;
            for (const dateKey in events) {
                const event = events[dateKey].find(e => e.id === eventId);
                if (event) {
                    foundEvent = event;
                    break;
                }
            }
            
            if (foundEvent) {
                document.getElementById('detailTitle').textContent = foundEvent.title;
                
                const eventDate = new Date(foundEvent.date);
                document.getElementById('detailDate').textContent = eventDate.toLocaleDateString('en-US', {
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric'
                });
                
                document.getElementById('detailTime').textContent = foundEvent.time || 'All day';
                document.getElementById('detailDescription').textContent = foundEvent.description || 'No description provided';
                
                document.getElementById('eventDetailsModal').classList.remove('hidden');
            }
        }

        function closeEventDetailsModal() {
            document.getElementById('eventDetailsModal').classList.add('hidden');
            selectedEventId = null;
        }

        function deleteCurrentEvent() {
            if (!selectedEventId) return;
            
            // Find and delete the event
            for (const dateKey in events) {
                events[dateKey] = events[dateKey].filter(e => e.id !== selectedEventId);
                if (events[dateKey].length === 0) {
                    delete events[dateKey];
                }
            }
            
            saveEvents();
            closeEventDetailsModal();
            renderCalendar();
        }

        // ========================================
        // EVENT FORM HANDLING
        // ========================================
        
        document.getElementById('eventForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const title = document.getElementById('eventTitle').value.trim();
            const date = document.getElementById('eventDate').value;
            const time = document.getElementById('eventTime').value;
            const description = document.getElementById('eventDescription').value.trim();
            
            if (!title || !date) {
                alert('Please provide a title and date for the event');
                return;
            }
            
            const event = {
                id: Date.now().toString() + Math.random().toString(36).substr(2, 9),
                title,
                date,
                time,
                description
            };
            
            if (!events[date]) {
                events[date] = [];
            }
            
            events[date].push(event);
            events[date].sort((a, b) => {
                if (!a.time && !b.time) return 0;
                if (!a.time) return 1;
                if (!b.time) return -1;
                return a.time.localeCompare(b.time);
            });
            
            saveEvents();
            closeEventModal();
            renderCalendar();
        });

        // Close modals when clicking outside
        document.getElementById('eventModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeEventModal();
            }
        });

        document.getElementById('eventDetailsModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeEventDetailsModal();
            }
        });

        // ========================================
        // INITIALIZE ON LOAD
        // ========================================
        
        initCalendar();
    </script>
</body>
</html>
